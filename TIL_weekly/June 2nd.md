# 6월 2주차 TIL

---

## 진행 파일 목록

`project_diary.md`

_#내맘대로TIL챌린지 #동아일보 #미디어프론티어 #글로벌소프트웨어캠퍼스 #GSC신촌_

_글로벌소프트웨어캠퍼스와 동아일보가 함께 진행하는 챌린지입니다._

---
## 프로젝트 진행
- `project_diary.md` 참고

- 이번주 프로젝트 TO DO
# TIL - 2025년 6월 둘째 주 (어덕해 프로젝트 개발 회고)

이번 주는 Django 기반의 팬덤 생일카페 등록 서비스 **어덕해(덕생)**의 개발을 중점적으로 진행하며, 기능 안정화와 UI 고도화를 병행하였다. 특히 사용자 경험을 개선하기 위한 멀티스텝 폼 리팩토링과 지도 기반 인터랙션 기능을 다듬는 데 집중했다.

---

##  주요 개발 내역

### 1. `create.html` 멀티스텝 등록 폼 개선
- **step-0: 중복 등록 확인 페이지 신설**
  - 장소명, 카페명, 이벤트 기간 입력 후 `중복 확인` 버튼으로 기존 등록 여부를 판단하는 기능 추가
  - 관련 템플릿 파일: `components/create/_duplicate_check_step.html`
  - 중복 확인 결과에 따라 `success`, `warning` 메시지 표시 UI 구현

- **step-1 이후 아티스트/멤버 선택값 전달 개선**
  - `ddoksang_create.js` 내에서 중복 확인 성공 시 선택값을 `#final_artist_id`에 저장하고, 이후 단계에 전달되도록 처리

- **전체 멀티스텝 흐름 전반 리팩토링**
  - `DdoksangFormUtils`와 함께 스텝 간 값 유지 및 유효성 검사 로직 개선
  - flatpickr 기반 날짜 선택기와 지도 검색 입력도 전역 초기화 함수로 관리

---

### 2. 이미지 업로드 모듈 고도화
- 기존의 단순 이미지 업로드 기능을 **drag & drop + 순서 변경 + 미리보기** 가능한 방식으로 전면 개선
- `ddoksang_image_upload.js` 모듈 완성:
  - 최대 업로드 수, 용량 제한, 파일 ID 부여, 압축 여부 확인 기능 포함
  - `getFiles()`, `getFileCount()`, `clear()` 등 외부 호출 함수 제공
- 선택 이미지에 대해 `X` 삭제 버튼과 썸네일 미리보기 제공
- 다중 이미지 첨부 상태에서도 순서가 유지되도록 sortable.js 연동

---

### 3. 생일카페 상세 페이지 개선 (`detail.html`)
- 포스터 이미지 중요도에 맞게 갤러리 레이아웃 리디자인
  - 모든 이미지를 동일한 크기로 보여주며 3:4 비율 유지
  - 너무 작거나 큰 이미지 크기 문제 해결
- 특전 항목 중 텍스트가 긴 버튼에 대해 크기 일정화 조정

---

### 4. 찜하기(좋아요) 기능 통합 리팩토링
- `UnifiedFavoriteManager` 클래스를 기반으로 찜 기능 전면 통합
  - `components/_cafe_card_favorite.html`, `favorite.js`를 기준으로 통일된 UI/UX 제공
  - 빈 하트 ↔ 분홍 하트 전환, 로딩 애니메이션, 캐러셀 동기화 포함

---

### 5. 지도 관련 고도화 (`home.html`, `tour_map.html`)
- `map_utils.py` 리팩토링
  - `DistanceCalculator`, `MapDataGenerator` 클래스로 기능 분리
  - `get_nearby_cafes()` 등 거리 계산 기반 정렬 함수 범용화
- home 화면에서는 사용자 위치 기반 마커만 표시
- tour_map에서는 주변 카페 클러스터링 및 상세 카드 출력까지 구현

---

##  배운 점 / 느낀 점

- 멀티스텝 폼과 같이 **단계별 상태 관리가 중요한 UI**는 전역 상태를 JS 객체로 관리해야 유지보수가 쉬워진다.
- 이미지 업로드 관련 UX는 실사용자 기준에서 **드래그, 순서 지정, 삭제 기능**까지 있어야 편리하다는 점을 체감
- 지도 기능은 거리 계산, 좌표 유효성, 마커 UI 등을 **모듈화하지 않으면** 페이지별 로직 분리가 어려워진다.
- 모든 찜하기 버튼을 하나의 시스템으로 통합하니 오류가 줄고 유지보수 효율이 높아졌다.

---

##  다음 주 목표

- **후보 기능 구현**:
  - 리뷰 작성 및 요약 키워드 시각화
  - 생일카페 종료 후 상태 뱃지 자동 표시
  - 생일카페 등록 시 요약 프리뷰 팝업 기능
- **관리자 페이지 기능 확장**:
  - 미승인 생카 관리, 필터링 기능 추가
- **UI/디자인 통일성 점검**:
  - 특전 버튼, 찜 버튼, 슬라이드 UI 등 전반적 컨시스턴시 유지

---

